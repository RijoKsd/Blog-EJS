<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>

    <body>
        <%- include('./partials/nav.ejs')%>

            <!-- log blog -->

            <div class="details content">
                <h2>
                    <%= blog.title %>
                </h2>
                <p>
                    <%= blog.snippet %>
                </p>
                <div class="content">
                    <p>
                        <%= blog.body %>
                    </p>

                </div>
                <a data-doc="<%= blog._id %>" class="delete">Delete</a>
            </div>

            <%- include('./partials/footer.ejs') %>

                <script>
                    const deleteBtn = document.querySelector('a.delete');

                    deleteBtn.addEventListener('click', (e) => {
                        const id = deleteBtn.dataset.doc;
                        console.log(id, "id from delete button");
                        fetch(`/blogs/${id}`,
                            { method: 'DELETE' })
                            .then((response) => response.json())
                            .then((data) => window.location.href = data.redirect)
                            .catch(err => console.log(err, "error from fetch"))

                            .catch((err) => { console.log(err, "error from fetch") })
                    })

                </script>
    </body>

</html>